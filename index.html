<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Sivani ğŸ’™</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Pacifico&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html, body { width:100%; height:100%; overflow:hidden; touch-action:manipulation; }
body {
  min-height:100vh; min-height:100dvh; background:#000;
  display:flex; align-items:center; justify-content:center;
  position:relative; font-size:16px;
}

/* â”€â”€ STARS â”€â”€ */
.stars { position:fixed; inset:0; pointer-events:none; z-index:0; }
.star  { position:absolute; background:#fff; border-radius:50%; animation:twinkle var(--d) ease-in-out infinite; }
@keyframes twinkle { 0%,100%{opacity:0.1;transform:scale(1);} 50%{opacity:1;transform:scale(2);} }

/* â”€â”€ AURORA â”€â”€ */
.aurora {
  position:fixed; inset:0; pointer-events:none; z-index:0;
  background:
    radial-gradient(ellipse 80% 50% at 20% 50%, #0d47a180 0%, transparent 60%),
    radial-gradient(ellipse 60% 40% at 80% 40%, #1565c060 0%, transparent 60%),
    radial-gradient(ellipse 100% 60% at 50% 80%, #0a0a3080 0%, transparent 70%);
  animation:aurora 8s ease-in-out infinite alternate;
}
@keyframes aurora {
  0%  {filter:hue-rotate(0deg) brightness(1);}
  50% {filter:hue-rotate(20deg) brightness(1.3);}
  100%{filter:hue-rotate(-10deg) brightness(0.9);}
}

/* â”€â”€ MUSIC BTN â”€â”€ */
#musicBtn {
  position:fixed; top:16px; right:16px; z-index:200;
  background:#1976d230; border:1px solid #42a5f560;
  border-radius:50%; width:44px; height:44px;
  display:none; align-items:center; justify-content:center;
  font-size:1.2rem; cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  backdrop-filter:blur(4px);
  /* GPU layer for performance */
  will-change:transform;
}
#musicBtn.visible { display:flex; }
#musicBtn:active  { transform:scale(0.88); }
#musicBtn.playing { animation:mPulse 1.2s ease-in-out infinite; }
@keyframes mPulse {
  0%,100%{box-shadow:0 0 0 0 #1976d260;}
  50%    {box-shadow:0 0 0 8px #1976d200;}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen {
  position:fixed; inset:0;
  display:none; flex-direction:column;
  align-items:center; justify-content:center;
  z-index:10; padding:16px;
  /* GPU compositing for smooth transitions */
  will-change:opacity,transform;
}
.screen.active { display:flex; }
#s1.active { animation:none; }
#s2.active { animation:grandIn 0.8s cubic-bezier(0.34,1.56,0.64,1) both; }
#s3.active { animation:fadeIn  0.5s ease both; }
@keyframes grandIn { from{opacity:0;transform:scale(0.2) rotate(-15deg);} to{opacity:1;transform:scale(1) rotate(0);} }
@keyframes fadeIn  { from{opacity:0;} to{opacity:1;} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 1 â€” Reveal
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.s1-label {
  font-family:'Great Vibes',cursive;
  font-size:clamp(1.3rem,5vw,2rem);
  color:#90caf9;
  animation:pulse 2s ease-in-out infinite;
  letter-spacing:2px; text-align:center;
  margin-bottom:clamp(14px,4vw,26px);
}
@keyframes pulse { 0%,100%{opacity:0.6;} 50%{opacity:1;} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED GLOW BUTTON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.gbtn {
  position:relative;
  padding:clamp(14px,3.5vw,18px) clamp(34px,9vw,54px);
  font-family:'Pacifico',cursive;
  font-size:clamp(1rem,4vw,1.5rem);
  color:#fff; background:none; border:none;
  cursor:pointer; letter-spacing:2px;
  white-space:nowrap;
  -webkit-tap-highlight-color:transparent;
  /* Promote to own layer â†’ instant touch response */
  will-change:transform;
  transform:translateZ(0);
}
.gbtn-bg {
  position:absolute; inset:0; border-radius:50px;
  background:linear-gradient(135deg,#0d47a1,#1976d2,#42a5f5,#1565c0);
  box-shadow:0 0 28px #1976d2aa, 0 0 55px #1976d250, inset 0 1px 0 #ffffff30;
  z-index:-1;
  /* No heavy looping gradient animation on this element */
  transition:transform 0.15s, box-shadow 0.15s;
}
.gbtn:active .gbtn-bg { transform:scale(0.94); box-shadow:0 0 12px #1976d2aa; }
/* Shine â€” runs only on show/once-more btn, not Next btn */
.gbtn-shine {
  position:absolute; top:0; left:-110%;
  width:55%; height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.25),transparent);
  border-radius:50px; transform:skewX(-20deg);
  animation:shine 3.5s infinite;
  pointer-events:none; z-index:1;
}
@keyframes shine { 0%{left:-110%;} 35%{left:160%;} 100%{left:160%;} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 2 â€” Universe
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#s2 { gap:0; overflow-y:auto; padding-bottom:24px; }

.universe {
  position:relative;
  width:min(78vw,72vh,380px); height:min(78vw,72vh,380px);
  display:flex; align-items:center; justify-content:center;
  overflow:visible; flex-shrink:0;
}
.center-glow {
  position:absolute; width:50%; height:50%; border-radius:50%;
  background:radial-gradient(circle,#1565c080 0%,#0d47a140 50%,transparent 70%);
  animation:orbP 2.5s ease-in-out infinite; z-index:0;
}
@keyframes orbP { 0%,100%{transform:scale(1);opacity:0.7;} 50%{transform:scale(1.2);opacity:1;} }
.ring {
  position:absolute; border-radius:50%;
  border:1px solid #1976d240;
  animation:ringP 3s ease-in-out infinite;
}
.ring:nth-child(1){width:41%;height:41%;animation-delay:0s;}
.ring:nth-child(2){width:59%;height:59%;animation-delay:.5s;}
.ring:nth-child(3){width:82%;height:82%;animation-delay:1s;}
.ring:nth-child(4){width:98%;height:98%;animation-delay:1.5s;}
@keyframes ringP {
  0%,100%{border-color:#1976d240;}
  50%    {border-color:#42a5f590;box-shadow:0 0 12px #1976d230;}
}
.oh {
  position:absolute; top:50%; left:50%;
  font-size:var(--fs,1.2rem);
  margin:calc(var(--fh)*-1) 0 0 calc(var(--fh)*-1);
  animation:orbit var(--dur) linear infinite;
  filter:drop-shadow(0 0 5px #42a5f5);
  z-index:2; line-height:1;
  will-change:transform;
}
@keyframes orbit {
  from{transform:rotate(var(--s)) translateX(var(--r)) rotate(calc(-1*var(--s)));}
  to  {transform:rotate(calc(var(--s)+360deg)) translateX(var(--r)) rotate(calc(-1*var(--s)-360deg));}
}
.name-wrap { position:relative; z-index:5; text-align:center; padding-top:.35em; overflow:visible; }
.name-text {
  font-family:'Great Vibes',cursive;
  font-size:clamp(3.2rem,12vw,5.8rem); line-height:1.3;
  background:linear-gradient(135deg,#e3f2fd,#90caf9,#42a5f5,#1976d2,#bbdefb,#fff);
  background-size:300% 300%;
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  animation:nameG 4s ease infinite, nameF 3s ease-in-out infinite;
  filter:drop-shadow(0 0 18px #42a5f5cc) drop-shadow(0 0 45px #1976d270);
  display:block; overflow:visible;
}
@keyframes nameG { 0%,100%{background-position:0% 50%;} 50%{background-position:100% 50%;} }
@keyframes nameF { 0%,100%{transform:translateY(0) scale(1);} 50%{transform:translateY(-7px) scale(1.03);} }
.sparkle {
  position:absolute; border-radius:50%; background:#90caf9;
  animation:spkl var(--d) ease-in-out infinite; z-index:3;
}
@keyframes spkl { 0%,100%{opacity:0;transform:scale(0);} 50%{opacity:1;transform:scale(1);} }
.subtitle {
  font-family:'Playfair Display',serif; color:#90caf9;
  font-size:clamp(0.6rem,2.6vw,1rem);
  letter-spacing:clamp(3px,1.5vw,5px); text-transform:uppercase;
  opacity:0; animation:slideUp 1s 1s ease forwards;
  margin-top:clamp(8px,2.5vw,14px); text-align:center; flex-shrink:0;
}
@keyframes slideUp { from{opacity:0;transform:translateY(18px);} to{opacity:0.9;transform:translateY(0);} }

/* â”€â”€ NEXT BUTTON â€” simple, clean, no heavy animation â”€â”€ */
#nextBtn {
  margin-top:clamp(14px,3.5vw,22px);
  flex-shrink:0;
  opacity:0;
  transform:translateY(16px);
  transition:opacity 0.5s ease, transform 0.5s ease;
  pointer-events:none;
}
#nextBtn.show {
  opacity:1; transform:translateY(0);
  pointer-events:all;
}
/* Override shine on next btn â€” too heavy */
#nextBtn .gbtn-shine { display:none; }
/* Simple border glow for next btn instead */
#nextBtn .gbtn-bg {
  background:linear-gradient(135deg,#0d47a1,#1976d2,#42a5f5);
  box-shadow:0 0 20px #1976d290, 0 0 40px #1976d240;
  animation:nextGlow 2s ease-in-out infinite;
}
@keyframes nextGlow {
  0%,100%{box-shadow:0 0 20px #1976d290, 0 0 40px #1976d240;}
  50%    {box-shadow:0 0 30px #42a5f5bb, 0 0 60px #1976d260;}
}

/* â”€â”€ BLUE HEART RAIN â”€â”€ */
.rain-heart {
  position:fixed; top:-50px; font-size:var(--fs);
  animation:hRain var(--d) linear forwards;
  pointer-events:none; z-index:1;
}
@keyframes hRain {
  0%  {transform:translateY(0) rotate(0) scale(.6); opacity:0;}
  8%  {opacity:0.8;}
  92% {opacity:0.5;}
  100%{transform:translateY(115vh) rotate(360deg) scale(1); opacity:0;}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 3 â€” Name Rain
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.name-rain {
  position:fixed; top:-110px; left:var(--l);
  font-family:'Great Vibes',cursive; font-size:var(--fs);
  background:linear-gradient(180deg,#e3f2fd,#90caf9,#42a5f5,#1976d2);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  filter:drop-shadow(0 0 9px #42a5f5bb) drop-shadow(0 0 20px #1976d270);
  pointer-events:none; z-index:50; opacity:0;
  animation:nRain var(--dur) var(--ease) var(--delay) forwards;
  white-space:nowrap; line-height:1; will-change:transform,opacity;
}
@keyframes nRain {
  0%  {opacity:0; transform:translateY(0) rotate(var(--rot)) scale(.5);}
  7%  {opacity:1;}
  78% {opacity:.9; transform:translateY(calc(100vh + 50px)) rotate(calc(var(--rot)*.3)) scale(1.05);}
  100%{opacity:0;  transform:translateY(115vh) rotate(0) scale(.85);}
}
.s3-content {
  position:relative; z-index:60;
  display:flex; flex-direction:column;
  align-items:center; gap:clamp(12px,3.5vw,24px);
}
.s3-name {
  font-family:'Great Vibes',cursive;
  font-size:clamp(3rem,12vw,5.5rem);
  background:linear-gradient(135deg,#e3f2fd,#90caf9,#42a5f5,#1976d2,#fff);
  background-size:300% 300%;
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  animation:nameG 3s ease infinite, nameF 2.5s ease-in-out infinite;
  filter:drop-shadow(0 0 22px #42a5f5cc) drop-shadow(0 0 50px #1976d275);
  line-height:1.3; padding-top:.3em; text-align:center;
}
.s3-sub {
  font-family:'Playfair Display',serif; color:#90caf9;
  font-size:clamp(.65rem,2.5vw,.95rem);
  letter-spacing:clamp(3px,1.5vw,6px); text-transform:uppercase;
  opacity:.85; text-align:center; animation:pulse 2s ease-in-out infinite;
}
#oncemoreBtn {
  opacity:0; animation:slideUp .8s .4s ease forwards;
}

/* â”€â”€ BURST & RIPPLE â”€â”€ */
.burst {
  position:fixed; pointer-events:none; z-index:99; line-height:1;
  animation:bAnim var(--d) ease-out forwards; will-change:transform,opacity;
}
@keyframes bAnim {
  0%  {opacity:1; transform:translate(0,0) scale(.3) rotate(0);}
  100%{opacity:0; transform:translate(var(--tx),var(--ty)) scale(1.8) rotate(var(--rot));}
}
.ripple {
  position:fixed; border-radius:50%; background:#1976d240; pointer-events:none; z-index:99;
  transform:translate(-50%,-50%);
  animation:rAnim .7s ease-out forwards;
}
@keyframes rAnim { from{width:0;height:0;opacity:1;} to{width:180px;height:180px;opacity:0;} }

/* â”€â”€ MEDIA â”€â”€ */
@media(max-width:380px){ .name-text,.s3-name{font-size:3rem;} }
@media(max-height:520px){
  .universe{width:min(55vw,260px);height:min(55vw,260px);}
  .name-text{font-size:clamp(2.4rem,8vw,3.5rem);}
  #nextBtn{margin-top:8px;}
}
@media(min-width:600px) and (max-width:1024px){
  .universe{width:min(65vw,400px);height:min(65vw,400px);}
}
</style>
</head>
<body>

<div class="stars" id="stars"></div>
<div class="aurora"></div>
<button id="musicBtn" onclick="toggleMusic()">ğŸµ</button>

<!-- â•â• SCREEN 1 â€” Tap to Reveal â•â• -->
<div class="screen active" id="s1">
  <div class="s1-label">âœ¦ A Special Surprise Awaits âœ¦</div>
  <button class="gbtn" onclick="goS2(event)">
    <div class="gbtn-bg"></div>
    <div class="gbtn-shine"></div>
    ğŸ’™ Tap to Reveal ğŸ’™
  </button>
</div>

<!-- â•â• SCREEN 2 â€” Sivani Universe â•â• -->
<div class="screen" id="s2">
  <div class="universe" id="universe">
    <div class="ring"></div><div class="ring"></div>
    <div class="ring"></div><div class="ring"></div>
    <div class="center-glow"></div>
    <div class="name-wrap">
      <div class="name-text">Sivani</div>
    </div>
  </div>
  <div class="subtitle">Forever In My Heart</div>

  <!-- NEXT BUTTON â€” clean, simple, instant response -->
  <button id="nextBtn" class="gbtn" onclick="goS3(event)">
    <div class="gbtn-bg"></div>
    <div class="gbtn-shine"></div>
    ğŸ’™ <b>N</b>ext ğŸ’™
  </button>
</div>

<!-- â•â• SCREEN 3 â€” Sivani Name Rain â•â• -->
<div class="screen" id="s3">
  <div class="s3-content">
    <div class="s3-name">Sivani</div>
    <div class="s3-sub">ğŸ’™ Raining With Love ğŸ’™</div>
    <button id="oncemoreBtn" class="gbtn" onclick="goS1(event)">
      <div class="gbtn-bg"></div>
      <div class="gbtn-shine"></div>
      ğŸ’™ Once More ğŸ’™
    </button>
  </div>
</div>

<script>
// â”€â”€ Stars
(()=>{
  const el=document.getElementById('stars');
  for(let i=0;i<160;i++){
    const s=document.createElement('div'); s.className='star';
    const big=Math.random()>.9;
    s.style.cssText=`left:${Math.random()*100}%;top:${Math.random()*100}%;--d:${1.5+Math.random()*4}s;animation-delay:${Math.random()*5}s;width:${big?3:1.5}px;height:${big?3:1.5}px;opacity:${.1+Math.random()*.5}`;
    el.appendChild(s);
  }
})();

// â”€â”€ Music
let musicPlaying=false;
const audio=new Audio('birthday-song.mp3');
audio.loop=true; audio.volume=0.7;
function startMusic(){ audio.play().catch(()=>{}); musicPlaying=true; const b=document.getElementById('musicBtn'); b.textContent='ğŸ”‡'; b.classList.add('playing'); }
function stopMusic() { audio.pause(); audio.currentTime=0; musicPlaying=false; const b=document.getElementById('musicBtn'); b.textContent='ğŸµ'; b.classList.remove('playing'); }
function toggleMusic(){ musicPlaying?stopMusic():startMusic(); }

// â”€â”€ Orbits
function buildOrbits(){
  const u=document.getElementById('universe');
  u.querySelectorAll('.oh,.sparkle').forEach(e=>e.remove());
  const sz=u.offsetWidth;
  [{rf:.205,dur:'4s', fsf:.032,n:8, h:['ğŸ’™','ğŸ©µ']},
   {rf:.296,dur:'6s', fsf:.025,n:10,h:['ğŸ’™','ğŸ©µ','ğŸ’™']},
   {rf:.420,dur:'9s', fsf:.020,n:12,h:['ğŸ©µ','ğŸ’™']},
   {rf:.490,dur:'12s',fsf:.017,n:14,h:['ğŸ’™','ğŸ©µ']}
  ].forEach(c=>{
    const r=Math.round(sz*c.rf), fs=Math.max(10,Math.round(sz*c.fsf));
    for(let i=0;i<c.n;i++){
      const o=document.createElement('div'); o.className='oh';
      o.textContent=c.h[i%c.h.length];
      o.style.cssText=`--r:${r}px;--dur:${c.dur};--s:${(360/c.n)*i}deg;--fs:${fs}px;--fh:${fs/2}px`;
      u.appendChild(o);
    }
  });
  for(let i=0;i<22;i++){
    const sp=document.createElement('div'); sp.className='sparkle';
    const a=Math.random()*360, r=(.09+Math.random()*.38)*sz, px=2+Math.random()*3.5;
    sp.style.cssText=`left:calc(50% + ${Math.cos(a*Math.PI/180)*r}px);top:calc(50% + ${Math.sin(a*Math.PI/180)*r}px);--d:${1+Math.random()*3}s;animation-delay:${Math.random()*3}s;background:${Math.random()>.5?'#90caf9':'#fff'};width:${px}px;height:${px}px`;
    u.appendChild(sp);
  }
}
let rsz; window.addEventListener('resize',()=>{ clearTimeout(rsz); rsz=setTimeout(buildOrbits,300); });

// â”€â”€ Heart Rain
let heartRainId=null;
function startHeartRain(){
  if(heartRainId) return;
  const em=['ğŸ’™','ğŸ’™','ğŸ’™','ğŸ©µ','ğŸ’™','ğŸ©µ'];
  function drop(){
    const h=document.createElement('div'); h.className='rain-heart';
    h.textContent=em[Math.floor(Math.random()*em.length)];
    h.style.cssText=`left:${Math.random()*100}vw;--d:${3+Math.random()*5}s;--fs:${.8+Math.random()*1.5}rem`;
    document.body.appendChild(h); setTimeout(()=>h.remove(),8500);
  }
  for(let i=0;i<8;i++) setTimeout(drop,i*200);
  heartRainId=setInterval(()=>{ for(let i=0;i<3;i++) setTimeout(drop,i*150); },650);
}
function stopHeartRain(){
  clearInterval(heartRainId); heartRainId=null;
  document.querySelectorAll('.rain-heart').forEach(e=>e.remove());
}

// â”€â”€ Sivani Name Rain
let nameRainId=null, nameRainOn=false;
function dropName(){
  const el=document.createElement('div'); el.className='name-rain'; el.textContent='Sivani';
  const sz=['1.8rem','2.4rem','3rem','3.8rem','4.5rem','5.4rem','2.1rem'];
  const ea=['ease-in','ease-in-out','cubic-bezier(.3,0,.7,1)'];
  el.style.setProperty('--fs', sz[Math.floor(Math.random()*sz.length)]);
  el.style.setProperty('--dur',(3.5+Math.random()*4).toFixed(2)+'s');
  el.style.setProperty('--delay',(Math.random()*.4).toFixed(2)+'s');
  el.style.setProperty('--l',  (2+Math.random()*88).toFixed(1)+'vw');
  el.style.setProperty('--rot',(Math.random()*26-13).toFixed(1)+'deg');
  el.style.setProperty('--ease',ea[Math.floor(Math.random()*ea.length)]);
  document.body.appendChild(el); setTimeout(()=>el.remove(),8800);
}
function startNameRain(){
  if(nameRainOn) return; nameRainOn=true;
  const w=window.innerWidth<600?10:16;
  for(let i=0;i<w;i++) setTimeout(dropName,i*95);
  nameRainId=setInterval(()=>{ const n=window.innerWidth<600?2:3; for(let i=0;i<n;i++) setTimeout(dropName,i*170); },600);
}
function stopNameRain(){
  nameRainOn=false; clearInterval(nameRainId); nameRainId=null;
  document.querySelectorAll('.name-rain').forEach(e=>e.remove());
}

// â”€â”€ Burst & Ripple
function burst(x,y,cnt=18){
  const mob=window.innerWidth<600, n=mob?Math.floor(cnt*.7):cnt;
  for(let i=0;i<n;i++){
    const b=document.createElement('div'); b.className='burst';
    b.textContent=Math.random()>.4?'ğŸ’™':'ğŸ©µ';
    b.style.fontSize=(.8+Math.random()*1.4)+'rem';
    b.style.left=x+'px'; b.style.top=y+'px';
    const a=Math.random()*360, d=55+Math.random()*(mob?140:230);
    b.style.setProperty('--tx',Math.cos(a*Math.PI/180)*d+'px');
    b.style.setProperty('--ty',Math.sin(a*Math.PI/180)*d+'px');
    b.style.setProperty('--rot',(Math.random()*360-180)+'deg');
    b.style.setProperty('--d',(.5+Math.random()*.7)+'s');
    document.body.appendChild(b); setTimeout(()=>b.remove(),1300);
  }
}
function ripple(x,y){
  const r=document.createElement('div'); r.className='ripple';
  r.style.left=x+'px'; r.style.top=y+'px';
  document.body.appendChild(r); setTimeout(()=>r.remove(),800);
}

// â”€â”€ Tap-anywhere burst (screen 2)
function onClickBurst(e){ if(e.target.closest('#nextBtn')||e.target.closest('#musicBtn')) return; burst(e.clientX,e.clientY,8); ripple(e.clientX,e.clientY); }
function onTouchBurst(e){ const t=e.touches[0]; if(!t) return; const el=document.elementFromPoint(t.clientX,t.clientY); if(el&&(el.closest('#nextBtn')||el.closest('#musicBtn'))) return; burst(t.clientX,t.clientY,8); ripple(t.clientX,t.clientY); }

// â”€â”€ Screen helpers
function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// â”€â”€ S1 â†’ S2
function goS2(e){
  const rc=e.currentTarget.getBoundingClientRect(), cx=rc.left+rc.width/2, cy=rc.top+rc.height/2;
  burst(cx,cy,26); ripple(cx,cy);
  [180,420,660].forEach(t=>setTimeout(()=>{ burst(cx+Math.random()*50-25,cy+Math.random()*50-25,10); ripple(cx,cy); },t));

  showScreen('s2');
  buildOrbits();

  // re-trigger subtitle
  const sub=document.querySelector('#s2 .subtitle');
  sub.style.animation='none'; void sub.offsetWidth; sub.style.animation='slideUp 1s 1s ease forwards';

  // Show Next button with smooth fade-in after 1.8s
  const nb=document.getElementById('nextBtn');
  nb.classList.remove('show');
  setTimeout(()=>nb.classList.add('show'), 1800);

  startHeartRain();
  document.getElementById('musicBtn').classList.add('visible');
  setTimeout(()=>startMusic(),350);

  document.addEventListener('click',onClickBurst);
  document.addEventListener('touchstart',onTouchBurst,{passive:true});
}

// â”€â”€ S2 â†’ S3
function goS3(e){
  // Instant visual feedback FIRST
  const nb=e.currentTarget;
  nb.style.transform='scale(0.93)';
  setTimeout(()=>nb.style.transform='',150);

  const rc=nb.getBoundingClientRect(), cx=rc.left+rc.width/2, cy=rc.top+rc.height/2;
  burst(cx,cy,22); ripple(cx,cy);

  document.removeEventListener('click',onClickBurst);
  document.removeEventListener('touchstart',onTouchBurst);
  stopHeartRain();

  showScreen('s3');
  startNameRain();

  // Reset once more animation
  const ob=document.getElementById('oncemoreBtn');
  ob.style.animation='none'; ob.style.opacity='0';
  void ob.offsetWidth; ob.style.animation='slideUp .8s .4s ease forwards';
}

// â”€â”€ S3 â†’ S1
function goS1(e){
  const rc=e.currentTarget.getBoundingClientRect(), cx=rc.left+rc.width/2, cy=rc.top+rc.height/2;
  burst(cx,cy,28); ripple(cx,cy);
  [180,380].forEach(t=>setTimeout(()=>{ burst(cx+Math.random()*55-27,cy+Math.random()*55-27,10); ripple(cx,cy); },t));

  stopNameRain(); stopMusic();
  document.getElementById('musicBtn').classList.remove('visible');
  showScreen('s1');
}
</script>
</body>
</html>
